## Первый блок
1. Из чего состоит HTTP-запрос?

HTTP-запрос состоит из следующих элементов:

·         **Стартовая строка**: содержит метод, URI (путь к ресурсу) и версию протокола.  
Пример: GET /index.html HTTP/1.1.

·         **Заголовки (Headers)**: метаданные в формате Ключ: Значение.  
Примеры: Host: example.com, User-Agent: curl/7.68.0.

·         **Пустая строка**: разделяет заголовки и тело запроса.

·         **Тело (Body)**: опционально, используется в методах, например, POST или PUT.  
Пример: {"name": "John"}.

---

2. Методы HTTP-запросов

Основные методы:

·         **GET**: Получение данных.

·         **POST**: Отправка данных (создание ресурса).

·         **PUT**: Обновление существующего ресурса.

·         **DELETE**: Удаление ресурса.

·         **HEAD**: Получение метаданных (без тела ответа).

·         **PATCH**: Частичное обновление ресурса.

·         **OPTIONS**: Получение информации о поддерживаемых методах.

Менее распространенные: TRACE, CONNECT.

---

3. Что такое заголовок в HTTP? Какие заголовки обязательны?

**Заголовки** — это метаданные, передающие дополнительную информацию о запросе или ответе.  
Примеры:

·         Host: Указывает домен сервера (обязателен в HTTP/1.1).

·         Content-Type: Тип данных тела (например, application/json).

·         User-Agent: Информация о клиенте.

**Обязательные заголовки**:

·         В **HTTP/1.1** обязательно указывать Host, иначе сервер вернет ошибку 400 Bad Request.

·         В HTTP/2 и HTTP/3 заголовок Host не обязателен, но на практике его всегда включают.

Для запросов с телом (например, POST) могут потребоваться:

·         Content-Length (если тело передается напрямую).

·         Transfer-Encoding: chunked (для потоковой передачи).

---

4. Группы кодов ответов HTTP

Коды делятся на 5 групп:

1.    **1xx (Информационные)**:  
Пример: 100 Continue — сервер готов принять тело запроса.

2.    **2xx (Успех)**:  
Примеры: 200 OK, 201 Created.

3.    **3xx (Перенаправления)**:  
Примеры: 301 Moved Permanently, 302 Found.

4.    **4xx (Ошибка клиента)**:  
Примеры: 400 Bad Request, 404 Not Found.

5.    **5xx (Ошибка сервера)**:  
Примеры: 500 Internal Server Error, 503 Service Unavailable.

---

5. Как отправить HTTP-запрос из консоли в Linux?

**Инструменты**:

·         **curl** — универсальный инструмент для работы с HTTP.

·         **wget** — подходит для скачивания файлов.

**Примеры с curl**:

·         GET-запрос:

curl http://example.com

·         POST-запрос с данными:

curl -X POST -d "param1=value1&param2=value2" http://example.com

·         Запрос с заголовками:

curl -H "Content-Type: application/json" -H "Authorization: Bearer token" http://api.example.com

·         Сохранение результата в файл:

curl -o output.html http://example.com

**Пример с wget**:

wget http://example.com/file.zip
## Второй блок
1. Чем отличаются HTTP/1.1 от HTTP/2?

·         **Мультиплексирование**: HTTP/2 позволяет отправлять несколько запросов и получать ответы параллельно через одно TCP-соединение, тогда как в HTTP/1.1 запросы обрабатываются последовательно (или с ограниченным параллелизмом через несколько соединений).

·         **Сжатие заголовков**: HTTP/2 использует алгоритм **HPACK** для сжатия заголовков, уменьшая избыточность данных.

·         **Приоритезация запросов**: HTTP/2 позволяет назначать приоритеты ресурсам, чтобы важные данные загружались быстрее.

·         **Server Push**: Сервер может отправлять клиенту ресурсы заранее (например, CSS/JS), которые понадобятся позже.

·         **Бинарный протокол**: В отличие от текстового формата HTTP/1.1, HTTP/2 передаёт данные в бинарном виде, что ускоряет обработку.

---

2. Как работает HTTPS?

HTTPS (HTTP Secure) — это HTTP поверх шифрованного соединения **TLS/SSL**:

1.    **Рукопожатие (Handshake)**:

o    Клиент и сервер согласуют параметры шифрования.

o    Сервер отправляет свой **SSL-сертификат** для аутентификации.

o    Создаётся общий симметричный ключ (через алгоритмы типа **Diffie-Hellman**).

2.    **Шифрование данных**: После рукопожатия обмен данными происходит через симметричное шифрование (AES и др.).

3.    **Аутентификация**: Сертификат сервера проверяется на подлинность через доверенный **CA** (Certificate Authority).

---

3. Серверный/клиентский сертификат. Типы сертификатов

·         **Сертификат сервера**: Подтверждает подлинность домена/сервера (используется в HTTPS).

·         **Клиентский сертификат**: Используется для аутентификации клиента (например, в банковских системах).

**Типы сертификатов**:

·         **DV (Domain Validated)**: Проверка права на домен.

·         **OV (Organization Validated)**: Дополнительная проверка организации.

·         **EV (Extended Validation)**: Расширенная проверка (в браузере отображается название компании).

·         **Wildcard**: Для поддоменов (например, *.example.com).

·         **Multi-Domain (SAN)**: Покрывает несколько доменов.

---

4. Информация в сертификате

·         **Доменное имя** (Common Name, SAN).

·         **Данные владельца** (организация, страна).

·         **Публичный ключ** сервера.

·         **Срок действия** (начало и окончание).

·         **Информация о CA** (кто выдал сертификат).

·         **Цифровая подпись CA**.

---

5. Что такое CA и зачем он нужен?

**CA (Certificate Authority)** — это доверенная организация, которая:

·         Выпускает и подписывает SSL-сертификаты.

·         Гарантирует подлинность сервера/клиента.

·         Браузеры и ОС имеют встроенный список доверенных CA. Если сертификат подписан неизвестным CA, пользователь получит предупреждение.

---

6. Самоподписанный vs доверенный сертификат

·         **Самоподписанный**:

o    Создаётся самостоятельно без участия CA.

o    Браузеры не доверяют таким сертификатам (показывают ошибку).

o    Используется для тестирования или внутренних сетей.

·         **Доверенный**:

o    Выпущен проверенным CA.

o    Автоматически принимается браузерами.

o    Платный (кроме Let’s Encrypt).

---

7. Что такое CORS?

**CORS (Cross-Origin Resource Sharing)** — механизм, разрешающий запросы к ресурсам с другого домена (origin).

·         **Политика Same-Origin**: Браузеры по умолчанию блокируют междоменный запросы (например, AJAX с example.com к api.example.org).

·         **Как работает CORS**:

o    Сервер отправляет заголовки, например:  
Access-Control-Allow-Origin: https://example.com.

o    Для сложных запросов (например, POST с нестандартными заголовками) сначала отправляется **preflight-запрос** (метод OPTIONS) для проверки разрешений.

·         Примеры заголовков:  
Access-Control-Allow-Methods: GET, POST,  
Access-Control-Allow-Headers: Content-Type.

---

**Итог**:  
HTTP/2 улучшает производительность, HTTPS обеспечивает шифрование, сертификаты подтверждают подлинность, CA — это доверенные центры, а CORS решает проблемы междоменный -запросов. Cross-domain
## Третий блок
1. Что такое цепочка сертификатов?

**Цепочка сертификатов** (или цепочка доверия) — это последовательность сертификатов, которая связывает ваш сертификат с корневым сертификатом доверенного центра сертификации (CA). Она включает:

·         **Конечный сертификат** (ваш сертификат).

·         **Промежуточные сертификаты** (сертификаты CA, которые подписывают ваш сертификат).

·         **Корневой сертификат** (самый верхний уровень доверия, встроенный в браузеры и ОС).

Пример цепочки:  
Ваш сертификат -> Промежуточный сертификат Let’s Encrypt -> Корневой сертификат ISRG.

---

2. Как создать самоподписанный TLS-сертификат?

Используйте OpenSSL:

openssl req -x509 -newkey rsa:4096 -keyout key.pem -out cert.pem -days 365 -nodes

·         **-x509**: Создать самоподписанный сертификат.

·         **-newkey rsa:4096**: Сгенерировать ключ RSA 4096 бит.

·         **-days 365**: Срок действия (1 год).

·         **-nodes**: Не шифровать приватный ключ паролем.

**Использование**: Подходит для локального тестирования, но браузеры будут предупреждать о ненадежности.

---

3. Как получить доверенный TLS-сертификат от CA?

**Шаги**:

1.    **Выберите CA**: Let’s Encrypt (бесплатно), DigiCert, Comodo и др.

2.    **Сгенерируйте CSR (Certificate Signing Request)**:

openssl req -new -newkey rsa:2048 -nodes -keyout domain.key -out domain.csr

3.    **Отправьте CSR CA** и подтвердите владение доменом (через DNS, файл или email).

4.    **Получите сертификат** (обычно в формате .crt или .pem).

**Для Let’s Encrypt** используйте Certbot (автоматизирует процесс):

sudo certbot certonly --nginx -d example.com

---

4. Как настроить HTTPS в Nginx?

**Пример конфигурации** (/etc/nginx/sites-available/example.com):

server {

    listen 443 ssl;

    server_name example.com;

    ssl_certificate /etc/ssl/certs/cert.pem;     # Путь к сертификату

    ssl_certificate_key /etc/ssl/private/key.pem; # Путь к ключу

    # Перенаправление HTTP -> HTTPS

    if ($scheme != "https") {

        return 301 https://$host$request_uri;

    }

    # ... остальные настройки ...

}

**Перезапустите Nginx**:

sudo systemctl reload nginx

---

5. Как разрешить стороннему сайту показывать картинки с нашего сайта?

Настройте CORS (Cross-Origin Resource Sharing) на вашем сервере.  
**Пример для Nginx**:

location ~* \.(jpg|jpeg|png|gif)$ {

    add_header Access-Control-Allow-Origin "*"; # Разрешить всем доменам

    add_header Access-Control-Allow-Methods "GET";

}

·         * разрешает доступ всем сайтам. Для ограничения укажите конкретный домен: https://client-site.com.

---

6. Можно ли обойти CORS?

**Да, но это не рекомендуется из соображений безопасности**:

1.    **Прокси-сервер**: Запросы идут через ваш сервер, где CORS не применяется.

2.    **JSONP** (устаревший): Использует тег <script>, но работает только для GET-запросов.

3.    **Отключение CORS в браузере** (только для тестирования): Запуск браузера с флагами вроде --disable-web-security.

**Лучший способ**: Настройте корректные заголовки CORS на вашем сервере (как в п.5).